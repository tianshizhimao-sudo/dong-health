<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#1a1a2e">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’ª</text></svg>">
  <title>ğŸ’ª å¥èº«æ‰“å¡</title>
  <style>
    :root {
      --bg: #1a1a2e;
      --card: #16213e;
      --accent: #2ECC85;
      --accent-light: #4edd9a;
      --accent-warm: #e94560;
      --text: #eaeaea;
      --muted: #a0a0a0;
      --success: #2ECC85;
      --warning: #ffd93d;
      --border: #0f3460;
      --input-bg: #0f1729;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      min-height: 100dvh;
      padding: 16px;
      padding-bottom: max(120px, env(safe-area-inset-bottom, 120px));
      -webkit-font-smoothing: antialiased;
    }
    .container { max-width: 500px; margin: 0 auto; }
    
    header { text-align: center; padding: 16px 0 24px; }
    h1 { font-size: 24px; margin-bottom: 4px; }
    .date { color: var(--muted); font-size: 14px; }
    
    .tabs {
      display: flex;
      gap: 6px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding-bottom: 8px;
      -webkit-overflow-scrolling: touch;
    }
    .tab {
      padding: 10px 14px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.2s;
      flex-shrink: 0;
    }
    .tab.active { background: var(--accent); border-color: var(--accent); color: #1a1a2e; font-weight: 700; }
    .tab:hover { border-color: var(--accent); }
    
    .workout-content { display: none; }
    .workout-content.active { display: block; }
    
    .section {
      background: var(--card);
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 12px;
      border: 1px solid var(--border);
      content-visibility: auto;
    }
    .section-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 12px;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .exercise {
      background: rgba(255,255,255,0.03);
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 10px;
      border: 1px solid rgba(255,255,255,0.05);
      transition: all 0.2s;
    }
    .exercise.completed {
      border-color: var(--success);
      background: rgba(78, 204, 163, 0.08);
    }
    .exercise.partial {
      border-color: var(--warning);
      background: rgba(255, 217, 61, 0.08);
    }
    
    .exercise-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .exercise-name {
      font-size: 14px;
      font-weight: 600;
    }
    .exercise-target {
      font-size: 11px;
      color: var(--muted);
      background: rgba(255,255,255,0.05);
      padding: 4px 8px;
      border-radius: 6px;
    }
    
    .sets-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
      gap: 8px;
      margin-bottom: 10px;
    }
    .set-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }
    .set-label {
      font-size: 10px;
      color: var(--muted);
    }
    .set-input {
      width: 100%;
      padding: 8px 4px;
      background: var(--input-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 14px;
      text-align: center;
      -webkit-appearance: none;
    }
    .set-weight {
      width: 100%;
      padding: 6px 4px;
      background: var(--input-bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--muted);
      font-size: 11px;
      text-align: center;
      -webkit-appearance: none;
    }
    .set-weight:focus {
      outline: none;
      border-color: var(--accent);
      color: var(--text);
    }
    .set-weight::placeholder {
      color: var(--muted);
      opacity: 0.6;
    }
    .set-input:focus {
      outline: none;
      border-color: var(--accent);
    }
    .set-input.done {
      border-color: var(--success);
      background: rgba(78, 204, 163, 0.15);
    }
    
    .exercise-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    
    
    .complete-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .complete-btn.pending {
      background: var(--border);
      color: var(--muted);
    }
    .complete-btn.done {
      background: var(--success);
      color: #1a1a2e;
    }
    .complete-btn:active { transform: scale(0.96); }
    
    .skip-btn {
      padding: 8px 12px;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      background: rgba(255, 170, 0, 0.2);
      color: #ffaa00;
    }
    .skip-btn:hover {
      background: rgba(255, 170, 0, 0.3);
    }
    .skip-btn.skipped {
      background: rgba(255, 170, 0, 0.4);
      color: #ffcc00;
    }
    .exercise.skipped {
      opacity: 0.5;
    }
    .exercise.skipped .exercise-name {
      text-decoration: line-through;
    }
    
    /* Rating Section */
    .rating-section {
      background: linear-gradient(135deg, rgba(233,69,96,0.1), rgba(78,204,163,0.1));
      border-radius: 14px;
      padding: 20px;
      margin-top: 16px;
      text-align: center;
    }
    .rating-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
    }
    .rating-scale {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    .rating-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 2px solid var(--border);
      background: var(--card);
      color: var(--text);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .rating-btn:hover { border-color: var(--accent); }
    .rating-btn.selected {
      background: var(--accent);
      border-color: var(--accent);
      color: #1a1a2e;
      transform: scale(1.1);
    }
    .rating-labels {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--muted);
      padding: 0 20px;
    }
    
    .notes-input {
      width: 100%;
      padding: 12px;
      background: var(--input-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 14px;
      resize: none;
      margin-top: 12px;
    }
    .notes-input:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .save-workout-btn {
      width: 100%;
      padding: 16px;
      background: var(--accent);
      border: none;
      border-radius: 12px;
      color: #1a1a2e;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      margin-top: 16px;
      transition: all 0.2s;
    }
    .save-workout-btn:hover { background: var(--accent-light); }
    .save-workout-btn:active { transform: scale(0.98); }
    .save-workout-btn:disabled {
      background: var(--border);
      color: var(--muted);
      cursor: not-allowed;
    }
    
    /* Summary Section */
    .summary-card {
      background: var(--card);
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 12px;
      border: 1px solid var(--border);
    }
    .summary-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .summary-date {
      font-weight: 600;
    }
    .summary-type {
      font-size: 12px;
      padding: 4px 10px;
      background: var(--accent);
      border-radius: 20px;
      color: #1a1a2e;
      font-weight: 600;
    }
    .summary-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      text-align: center;
    }
    .stat-item {
      padding: 10px;
      background: rgba(255,255,255,0.03);
      border-radius: 8px;
    }
    .stat-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--success);
    }
    .stat-label {
      font-size: 11px;
      color: var(--muted);
    }
    
    .sync-btn {
      width: 100%;
      padding: 14px;
      background: var(--card);
      border: 2px solid var(--success);
      border-radius: 12px;
      color: var(--success);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .sync-btn:hover { background: rgba(78, 204, 163, 0.1); }
    .sync-btn.secondary {
      border-color: var(--accent);
      color: var(--accent);
    }
    .sync-btn.secondary:hover { background: rgba(233, 69, 96, 0.1); }

    .export-buttons {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 16px;
    }

    .oney-hint {
      display: flex;
      gap: 12px;
      padding: 16px;
      background: linear-gradient(135deg, rgba(46, 204, 133, 0.1), rgba(78, 204, 163, 0.05));
      border: 1px solid rgba(46, 204, 133, 0.3);
      border-radius: 14px;
      margin-top: 16px;
    }
    .hint-icon { font-size: 24px; }
    .hint-content { flex: 1; }
    .hint-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--success);
      margin-bottom: 4px;
    }
    .hint-text {
      font-size: 13px;
      color: var(--muted);
      line-height: 1.4;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
    }
    .empty-state .emoji { font-size: 48px; margin-bottom: 12px; }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--success);
      color: #1a1a2e;
      padding: 12px 24px;
      border-radius: 30px;
      font-weight: 600;
      font-size: 14px;
      opacity: 0;
      transition: all 0.3s;
      z-index: 1000;
    }
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    @media (max-width: 380px) {
      .sets-grid { grid-template-columns: repeat(4, 1fr); }
      .rating-btn { width: 38px; height: 38px; font-size: 12px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html" style="display:inline-flex;align-items:center;gap:6px;color:var(--muted);text-decoration:none;font-size:14px;margin-bottom:12px;">â† è¿”å›å¥èº«ä¸­å¿ƒ</a>
    <header>
      <h1>ğŸ’ª å¥èº«æ‰“å¡</h1>
      <p class="date" id="currentDate"></p>
    </header>

    <div class="tabs">
      <button class="tab active" onclick="showWorkout('upper')">ğŸ‹ï¸ ä¸Šè‚¢æ—¥</button>
      <button class="tab" onclick="showWorkout('lower')">ğŸ¦µ ä¸‹è‚¢æ—¥</button>
      <button class="tab" onclick="showWorkout('core')">ğŸ”¥ æ ¸å¿ƒæ—¥</button>
      <button class="tab" onclick="showWorkout('history')">ğŸ“Š è®°å½•</button>
    </div>

    <!-- ä¸Šè‚¢æ—¥ -->
    <div id="upper" class="workout-content active">
      <div class="section">
        <div class="section-title">ğŸ’ª èƒ¸éƒ¨</div>
        <div class="exercise" data-exercise="bench-press">
          <div class="exercise-header">
            <span class="exercise-name">æ é“ƒå§æ¨</span>
            <span class="exercise-target">4ç»„ Ã— 8-10</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="incline-db-press">
          <div class="exercise-header">
            <span class="exercise-name">ä¸Šæ–œå“‘é“ƒå§æ¨</span>
            <span class="exercise-target">3ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="pec-fly">
          <div class="exercise-header">
            <span class="exercise-name">å¤¹èƒ¸æœº</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="cable-fly">
          <div class="exercise-header">
            <span class="exercise-name">ç»³ç´¢å¤¹èƒ¸</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ”™ èƒŒéƒ¨</div>
        <div class="exercise" data-exercise="pull-up">
          <div class="exercise-header">
            <span class="exercise-name">å¼•ä½“å‘ä¸Š</span>
            <span class="exercise-target">4ç»„ Ã— 6-10</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>è¾…åŠ©</label>
              <input type="number" class="weight-input" placeholder="kg" min="0" max="100">
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="barbell-row">
          <div class="exercise-header">
            <span class="exercise-name">æ é“ƒåˆ’èˆ¹</span>
            <span class="exercise-target">4ç»„ Ã— 8-10</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="seated-row">
          <div class="exercise-header">
            <span class="exercise-name">åå§¿åˆ’èˆ¹</span>
            <span class="exercise-target">3ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="lat-pulldown">
          <div class="exercise-header">
            <span class="exercise-name">é«˜ä½ä¸‹æ‹‰</span>
            <span class="exercise-target">3ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="straight-arm-pulldown">
          <div class="exercise-header">
            <span class="exercise-name">ç›´è‡‚ä¸‹å‹</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ¯ è‚©éƒ¨</div>
        <div class="exercise" data-exercise="shoulder-press">
          <div class="exercise-header">
            <span class="exercise-name">åå§¿è‚©æ¨</span>
            <span class="exercise-target">4ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="lateral-raise">
          <div class="exercise-header">
            <span class="exercise-name">å“‘é“ƒä¾§å¹³ä¸¾</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="face-pull">
          <div class="exercise-header">
            <span class="exercise-name">ç»³ç´¢é¢æ‹‰</span>
            <span class="exercise-target">3ç»„ Ã— 15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="shrug">
          <div class="exercise-header">
            <span class="exercise-name">å“‘é“ƒè€¸è‚©</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ’ª æ‰‹è‡‚</div>
        <div class="exercise" data-exercise="barbell-curl">
          <div class="exercise-header">
            <span class="exercise-name">æ é“ƒå¼¯ä¸¾</span>
            <span class="exercise-target">3ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="tricep-pushdown">
          <div class="exercise-header">
            <span class="exercise-name">ç»³ç´¢ä¸‰å¤´ä¸‹å‹</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="hammer-curl">
          <div class="exercise-header">
            <span class="exercise-name">å“‘é“ƒé”¤å¼å¼¯ä¸¾</span>
            <span class="exercise-target">3ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="overhead-extension">
          <div class="exercise-header">
            <span class="exercise-name">ç»³ç´¢è¿‡å¤´è‡‚å±ˆä¼¸</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="rating-section">
        <div class="rating-title">ä»Šå¤©è®­ç»ƒæ„Ÿè§‰å¦‚ä½•ï¼Ÿ</div>
        <div class="rating-scale" id="upper-rating">
          <button class="rating-btn" data-value="1">1</button>
          <button class="rating-btn" data-value="2">2</button>
          <button class="rating-btn" data-value="3">3</button>
          <button class="rating-btn" data-value="4">4</button>
          <button class="rating-btn" data-value="5">5</button>
          <button class="rating-btn" data-value="6">6</button>
          <button class="rating-btn" data-value="7">7</button>
          <button class="rating-btn" data-value="8">8</button>
          <button class="rating-btn" data-value="9">9</button>
          <button class="rating-btn" data-value="10">10</button>
        </div>
        <div class="rating-labels">
          <span>è½»æ¾</span>
          <span>é€‚ä¸­</span>
          <span>åŠ›ç«­</span>
        </div>
        <textarea class="notes-input" placeholder="è®­ç»ƒå¤‡æ³¨ï¼ˆå¯é€‰ï¼‰" rows="2" id="upper-notes"></textarea>
        <button class="save-workout-btn" onclick="saveWorkout('upper')">ğŸ’¾ ä¿å­˜è®­ç»ƒè®°å½•</button>
      </div>
    </div>

    <!-- ä¸‹è‚¢æ—¥ -->
    <div id="lower" class="workout-content">
      <div class="section">
        <div class="section-title">ğŸ¦µ å¤åˆåŠ¨ä½œ</div>
        <div class="exercise" data-exercise="squat">
          <div class="exercise-header">
            <span class="exercise-name">æ é“ƒæ·±è¹²</span>
            <span class="exercise-target">5ç»„ Ã— 6-8</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„5</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="rdl">
          <div class="exercise-header">
            <span class="exercise-name">ç½—é©¬å°¼äºšç¡¬æ‹‰</span>
            <span class="exercise-target">4ç»„ Ã— 8-10</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="bulgarian-split">
          <div class="exercise-header">
            <span class="exercise-name">ä¿åŠ åˆ©äºšåˆ†è…¿è¹²</span>
            <span class="exercise-target">3ç»„ Ã— 10/è…¿</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="hip-thrust">
          <div class="exercise-header">
            <span class="exercise-name">æ é“ƒè‡€æ¨</span>
            <span class="exercise-target">4ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ¯ å™¨æ¢°å­¤ç«‹</div>
        <div class="exercise" data-exercise="leg-press">
          <div class="exercise-header">
            <span class="exercise-name">è…¿ä¸¾</span>
            <span class="exercise-target">4ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="leg-extension">
          <div class="exercise-header">
            <span class="exercise-name">è…¿å±ˆä¼¸</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="leg-curl">
          <div class="exercise-header">
            <span class="exercise-name">è…¿å¼¯ä¸¾</span>
            <span class="exercise-target">3ç»„ Ã— 12-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="hip-abductor">
          <div class="exercise-header">
            <span class="exercise-name">è‡€éƒ¨å¤–å±•æœº</span>
            <span class="exercise-target">3ç»„ Ã— 15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="hip-adductor">
          <div class="exercise-header">
            <span class="exercise-name">è‡€éƒ¨å†…æ”¶æœº</span>
            <span class="exercise-target">3ç»„ Ã— 15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ¦¶ å°è…¿</div>
        <div class="exercise" data-exercise="standing-calf">
          <div class="exercise-header">
            <span class="exercise-name">ç«™å§¿æè¸µ</span>
            <span class="exercise-target">4ç»„ Ã— 15-20</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="seated-calf">
          <div class="exercise-header">
            <span class="exercise-name">åå§¿æè¸µ</span>
            <span class="exercise-target">3ç»„ Ã— 15-20</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="rating-section">
        <div class="rating-title">ä»Šå¤©è®­ç»ƒæ„Ÿè§‰å¦‚ä½•ï¼Ÿ</div>
        <div class="rating-scale" id="lower-rating">
          <button class="rating-btn" data-value="1">1</button>
          <button class="rating-btn" data-value="2">2</button>
          <button class="rating-btn" data-value="3">3</button>
          <button class="rating-btn" data-value="4">4</button>
          <button class="rating-btn" data-value="5">5</button>
          <button class="rating-btn" data-value="6">6</button>
          <button class="rating-btn" data-value="7">7</button>
          <button class="rating-btn" data-value="8">8</button>
          <button class="rating-btn" data-value="9">9</button>
          <button class="rating-btn" data-value="10">10</button>
        </div>
        <div class="rating-labels">
          <span>è½»æ¾</span>
          <span>é€‚ä¸­</span>
          <span>åŠ›ç«­</span>
        </div>
        <textarea class="notes-input" placeholder="è®­ç»ƒå¤‡æ³¨ï¼ˆå¯é€‰ï¼‰" rows="2" id="lower-notes"></textarea>
        <button class="save-workout-btn" onclick="saveWorkout('lower')">ğŸ’¾ ä¿å­˜è®­ç»ƒè®°å½•</button>
      </div>
    </div>

    <!-- æ ¸å¿ƒæ—¥ -->
    <div id="core" class="workout-content">
      <div class="section">
        <div class="section-title">ğŸ¯ Cable æ ¸å¿ƒ</div>
        <div class="exercise" data-exercise="woodchop-high">
          <div class="exercise-header">
            <span class="exercise-name">Woodchop (é«˜åˆ°ä½)</span>
            <span class="exercise-target">3ç»„ Ã— 12/ä¾§</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="woodchop-low">
          <div class="exercise-header">
            <span class="exercise-name">Woodchop (ä½åˆ°é«˜)</span>
            <span class="exercise-target">3ç»„ Ã— 12/ä¾§</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="pallof-press">
          <div class="exercise-header">
            <span class="exercise-name">Pallof Press</span>
            <span class="exercise-target">3ç»„ Ã— 12/ä¾§</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="cable-crunch">
          <div class="exercise-header">
            <span class="exercise-name">Cable Crunch</span>
            <span class="exercise-target">3ç»„ Ã— 15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ’ª å™¨æ¢°+è‡ªé‡</div>
        <div class="exercise" data-exercise="hanging-leg-raise">
          <div class="exercise-header">
            <span class="exercise-name">æ‚¬å‚ä¸¾è…¿</span>
            <span class="exercise-target">4ç»„ Ã— 10-15</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„4</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>å¤‡æ³¨</label>
              <input type="text" class="weight-input" placeholder="â€”" style="width:60px">
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="ab-roller">
          <div class="exercise-header">
            <span class="exercise-name">å¥è…¹è½®</span>
            <span class="exercise-target">3ç»„ Ã— 10-12</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>å¤‡æ³¨</label>
              <input type="text" class="weight-input" placeholder="â€”" style="width:60px">
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="plank">
          <div class="exercise-header">
            <span class="exercise-name">å¹³æ¿æ”¯æ’‘</span>
            <span class="exercise-target">3ç»„ Ã— 60ç§’</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="ç§’" min="0" max="180"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="ç§’" min="0" max="180"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="ç§’" min="0" max="180"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>å¤‡æ³¨</label>
              <input type="text" class="weight-input" placeholder="â€”" style="width:60px">
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="side-plank">
          <div class="exercise-header">
            <span class="exercise-name">ä¾§å¹³æ¿æ”¯æ’‘</span>
            <span class="exercise-target">3ç»„ Ã— 45ç§’/ä¾§</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="ç§’" min="0" max="120"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="ç§’" min="0" max="120"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="ç§’" min="0" max="120"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>å¤‡æ³¨</label>
              <input type="text" class="weight-input" placeholder="â€”" style="width:60px">
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="dead-bug">
          <div class="exercise-header">
            <span class="exercise-name">Dead Bug</span>
            <span class="exercise-target">3ç»„ Ã— 12/ä¾§</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="20"><input type="number" class="set-weight" placeholder="kg" min="0"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>å¤‡æ³¨</label>
              <input type="text" class="weight-input" placeholder="â€”" style="width:60px">
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
        
        <div class="exercise" data-exercise="russian-twist">
          <div class="exercise-header">
            <span class="exercise-name">ä¿„ç½—æ–¯è½¬ä½“</span>
            <span class="exercise-target">3ç»„ Ã— 20</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">ç»„1</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
            <div class="set-item"><span class="set-label">ç»„2</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
            <div class="set-item"><span class="set-label">ç»„3</span><input type="number" class="set-input" placeholder="æ¬¡" min="0" max="30"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>è¯çƒ</label>
              <input type="number" class="weight-input" placeholder="kg" min="0" max="20">
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ”¥ æœ‰æ°§ HIIT</div>
        <div class="exercise" data-exercise="cardio-hiit">
          <div class="exercise-header">
            <span class="exercise-name">å™¨æ¢°å¾ªç¯ / è·‘æ­¥æœº HIIT</span>
            <span class="exercise-target">30-35min</span>
          </div>
          <div class="sets-grid">
            <div class="set-item"><span class="set-label">æ—¶é•¿</span><input type="number" class="set-input" placeholder="åˆ†é’Ÿ" min="0" max="60"></div>
            <div class="set-item"><span class="set-label">è½®æ•°</span><input type="number" class="set-input" placeholder="è½®" min="0" max="10"></div>
          </div>
          <div class="exercise-footer"><button class="skip-btn" onclick="toggleSkip(this)">â­ï¸ è·³è¿‡</button>
            <div class="weight-input-group">
              <label>ç±»å‹</label>
              <select class="weight-input" style="width:90px">
                <option value="circuit">å™¨æ¢°å¾ªç¯</option>
                <option value="treadmill">è·‘æ­¥æœº</option>
              </select>
            </div>
            <button class="complete-btn pending" onclick="toggleComplete(this)">â¬œ æœªå®Œæˆ</button>
          </div>
        </div>
      </div>

      <div class="rating-section">
        <div class="rating-title">ä»Šå¤©è®­ç»ƒæ„Ÿè§‰å¦‚ä½•ï¼Ÿ</div>
        <div class="rating-scale" id="core-rating">
          <button class="rating-btn" data-value="1">1</button>
          <button class="rating-btn" data-value="2">2</button>
          <button class="rating-btn" data-value="3">3</button>
          <button class="rating-btn" data-value="4">4</button>
          <button class="rating-btn" data-value="5">5</button>
          <button class="rating-btn" data-value="6">6</button>
          <button class="rating-btn" data-value="7">7</button>
          <button class="rating-btn" data-value="8">8</button>
          <button class="rating-btn" data-value="9">9</button>
          <button class="rating-btn" data-value="10">10</button>
        </div>
        <div class="rating-labels">
          <span>è½»æ¾</span>
          <span>é€‚ä¸­</span>
          <span>åŠ›ç«­</span>
        </div>
        <textarea class="notes-input" placeholder="è®­ç»ƒå¤‡æ³¨ï¼ˆå¯é€‰ï¼‰" rows="2" id="core-notes"></textarea>
        <button class="save-workout-btn" onclick="saveWorkout('core')">ğŸ’¾ ä¿å­˜è®­ç»ƒè®°å½•</button>
      </div>
    </div>

    <!-- å†å²è®°å½• -->
    <div id="history" class="workout-content">
      <div id="history-list"></div>

      <div class="oney-hint">
        <div class="hint-icon">ğŸ’¡</div>
        <div class="hint-content">
          <div class="hint-title">è‡ªåŠ¨åŒæ­¥åˆ° Google Sheets</div>
          <div class="hint-text">è·Ÿ Oney è¯´"åŒæ­¥å¥èº«æ‰“å¡"å³å¯è‡ªåŠ¨è®°å½•åˆ° Google Sheets</div>
        </div>
      </div>

      <div class="export-buttons">
        <button class="sync-btn" onclick="copyDataToClipboard()">
          ğŸ“‹ å¤åˆ¶æ‰“å¡æ•°æ®
        </button>
        <button class="sync-btn" onclick="downloadCSV()">
          ğŸ“Š ä¸‹è½½ CSV
        </button>
        <button class="sync-btn secondary" onclick="exportData()">
          ğŸ“¤ å¯¼å‡º JSON
        </button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // Storage key
    const STORAGE_KEY = 'dong_fitness_tracker';
    const SYNC_KEY = 'dong_fitness_last_sync';
    const DRAFT_KEY = 'dong_fitness_draft';
    
    // è‡ªåŠ¨ä¿å­˜è‰ç¨¿ - é˜²æ­¢æ•°æ®ä¸¢å¤±
    function saveDraft() {
      const draft = {};
      ['upper', 'lower', 'core'].forEach(workoutType => {
        const container = document.getElementById(workoutType);
        if (!container) return;
        
        const exercises = {};
        container.querySelectorAll('.exercise').forEach(ex => {
          const exerciseId = ex.dataset.exercise;
          const sets = [];
          const weights = [];
          
          // æ”¶é›†æ¯ç»„çš„æ¬¡æ•°å’Œé‡é‡
          ex.querySelectorAll('.set-item').forEach(setItem => {
            const repInput = setItem.querySelector('.set-input');
            const weightInput = setItem.querySelector('.set-weight');
            sets.push(repInput?.value || '');
            weights.push(weightInput?.value || '');
          });
          
          const completed = ex.querySelector('.complete-btn').classList.contains('done');
          const skipped = ex.classList.contains('skipped');
          exercises[exerciseId] = { sets, weights, completed, skipped };
        });
        
        const ratingBtn = container.querySelector('.rating-scale .rating-btn.selected');
        const rating = ratingBtn ? ratingBtn.dataset.value : null;
        const notes = container.querySelector('.notes-input')?.value || '';
        
        draft[workoutType] = { exercises, rating, notes };
      });
      
      draft.savedAt = new Date().toISOString();
      localStorage.setItem(DRAFT_KEY, JSON.stringify(draft));
    }
    
    // æ¢å¤è‰ç¨¿
    function restoreDraft() {
      const draftStr = localStorage.getItem(DRAFT_KEY);
      if (!draftStr) return;
      
      try {
        const draft = JSON.parse(draftStr);
        // åªæ¢å¤ä»Šå¤©çš„è‰ç¨¿
        const savedDate = new Date(draft.savedAt).toDateString();
        const today = new Date().toDateString();
        if (savedDate !== today) {
          localStorage.removeItem(DRAFT_KEY);
          return;
        }
        
        ['upper', 'lower', 'core'].forEach(workoutType => {
          if (!draft[workoutType]) return;
          const container = document.getElementById(workoutType);
          if (!container) return;
          
          const { exercises, rating, notes } = draft[workoutType];
          
          // æ¢å¤æ¯ä¸ªåŠ¨ä½œçš„æ•°æ®
          Object.entries(exercises || {}).forEach(([exerciseId, data]) => {
            const ex = container.querySelector(`.exercise[data-exercise="${exerciseId}"]`);
            if (!ex) return;
            
            // æ¢å¤æ¯ç»„çš„æ¬¡æ•°å’Œé‡é‡
            ex.querySelectorAll('.set-item').forEach((setItem, i) => {
              const repInput = setItem.querySelector('.set-input');
              const weightInput = setItem.querySelector('.set-weight');
              
              if (repInput && data.sets && data.sets[i]) {
                repInput.value = data.sets[i];
                if (data.sets[i]) repInput.classList.add('done');
              }
              if (weightInput && data.weights && data.weights[i]) {
                weightInput.value = data.weights[i];
              }
            });
            
            // æ¢å¤è·³è¿‡çŠ¶æ€
            if (data.skipped) {
              const skipBtn = ex.querySelector('.skip-btn');
              if (skipBtn) {
                skipBtn.classList.add('skipped');
                skipBtn.innerHTML = 'â­ï¸ å·²è·³è¿‡';
              }
              ex.classList.add('skipped');
            }
            
            // æ¢å¤å®ŒæˆçŠ¶æ€
            if (data.completed && !data.skipped) {
              const btn = ex.querySelector('.complete-btn');
              btn.classList.remove('pending');
              btn.classList.add('done');
              btn.innerHTML = 'âœ… å·²å®Œæˆ';
              ex.classList.add('completed');
            }
          });
          
          // æ¢å¤è¯„åˆ†
          if (rating) {
            const ratingBtn = container.querySelector(`.rating-btn[data-value="${rating}"]`);
            if (ratingBtn) ratingBtn.classList.add('selected');
          }
          
          // æ¢å¤å¤‡æ³¨
          const notesInput = container.querySelector('.notes-input');
          if (notesInput && notes) notesInput.value = notes;
        });
        
        console.log('âœ… è‰ç¨¿å·²æ¢å¤');
      } catch (e) {
        console.error('æ¢å¤è‰ç¨¿å¤±è´¥:', e);
      }
    }
    
    // æ¸…é™¤è‰ç¨¿
    function clearDraft() {
      localStorage.removeItem(DRAFT_KEY);
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      updateDate();
      setupRatingButtons();
      setupSetInputs();
      loadHistory();
      checkAutoSync();
      
      // æ¢å¤è‰ç¨¿
      restoreDraft();
      
      // è‡ªåŠ¨ä¿å­˜ - ç›‘å¬æ‰€æœ‰è¾“å…¥å˜åŒ–
      document.querySelectorAll('.set-input, .set-weight, .notes-input').forEach(input => {
        input.addEventListener('input', debounce(saveDraft, 500));
        input.addEventListener('change', saveDraft);
      });
      
      // ç›‘å¬å®ŒæˆæŒ‰é’®ã€è·³è¿‡æŒ‰é’®å’Œè¯„åˆ†æŒ‰é’®
      document.querySelectorAll('.complete-btn, .skip-btn, .rating-btn').forEach(btn => {
        btn.addEventListener('click', () => setTimeout(saveDraft, 100));
      });
      
      // é¡µé¢å…³é—­å‰ä¿å­˜
      window.addEventListener('beforeunload', saveDraft);
      
      // æ¯30ç§’è‡ªåŠ¨ä¿å­˜ä¸€æ¬¡
      setInterval(saveDraft, 30000);
    });
    
    // é˜²æŠ–å‡½æ•°
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    function updateDate() {
      const now = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      document.getElementById('currentDate').textContent = now.toLocaleDateString('zh-CN', options);
    }
    
    function showWorkout(type) {
      document.querySelectorAll('.workout-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
      document.getElementById(type).classList.add('active');
      event.currentTarget.classList.add('active');
      
      if (type === 'history') {
        loadHistory();
      }
    }
    
    function toggleComplete(btn) {
      const exercise = btn.closest('.exercise');
      // å¦‚æœå·²è·³è¿‡ï¼Œå…ˆå–æ¶ˆè·³è¿‡
      if (exercise.classList.contains('skipped')) {
        const skipBtn = exercise.querySelector('.skip-btn');
        if (skipBtn) {
          skipBtn.classList.remove('skipped');
          skipBtn.innerHTML = 'â­ï¸ è·³è¿‡';
        }
        exercise.classList.remove('skipped');
      }
      
      if (btn.classList.contains('pending')) {
        btn.classList.remove('pending');
        btn.classList.add('done');
        btn.innerHTML = 'âœ… å·²å®Œæˆ';
        exercise.classList.add('completed');
      } else {
        btn.classList.remove('done');
        btn.classList.add('pending');
        btn.innerHTML = 'â¬œ æœªå®Œæˆ';
        exercise.classList.remove('completed');
      }
      saveDraft();
    }
    
    function toggleSkip(btn) {
      const exercise = btn.closest('.exercise');
      const completeBtn = exercise.querySelector('.complete-btn');
      
      if (btn.classList.contains('skipped')) {
        // å–æ¶ˆè·³è¿‡
        btn.classList.remove('skipped');
        btn.innerHTML = 'â­ï¸ è·³è¿‡';
        exercise.classList.remove('skipped');
      } else {
        // è·³è¿‡è¯¥åŠ¨ä½œ
        btn.classList.add('skipped');
        btn.innerHTML = 'â­ï¸ å·²è·³è¿‡';
        exercise.classList.add('skipped');
        // é‡ç½®å®ŒæˆçŠ¶æ€
        if (completeBtn) {
          completeBtn.classList.remove('done');
          completeBtn.classList.add('pending');
          completeBtn.innerHTML = 'â¬œ æœªå®Œæˆ';
          exercise.classList.remove('completed');
        }
      }
      saveDraft();
    }
    
    function setupRatingButtons() {
      document.querySelectorAll('.rating-scale').forEach(scale => {
        scale.querySelectorAll('.rating-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            scale.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
          });
        });
      });
    }
    
    function setupSetInputs() {
      document.querySelectorAll('.set-input').forEach(input => {
        input.addEventListener('input', () => {
          if (input.value && input.value > 0) {
            input.classList.add('done');
          } else {
            input.classList.remove('done');
          }
        });
      });
    }
    
    function collectWorkoutData(workoutType) {
      const container = document.getElementById(workoutType);
      const exercises = [];
      
      container.querySelectorAll('.exercise').forEach(ex => {
        const name = ex.querySelector('.exercise-name').textContent;
        const exerciseId = ex.dataset.exercise;
        const sets = [];
        const weights = [];
        
        // æ”¶é›†æ¯ç»„çš„æ¬¡æ•°å’Œé‡é‡
        ex.querySelectorAll('.set-item').forEach((setItem, i) => {
          const repInput = setItem.querySelector('.set-input');
          const weightInput = setItem.querySelector('.set-weight');
          sets.push(parseInt(repInput?.value) || 0);
          weights.push(parseFloat(weightInput?.value) || 0);
        });
        
        const completed = ex.querySelector('.complete-btn').classList.contains('done');
        const skipped = ex.classList.contains('skipped');
        
        exercises.push({
          id: exerciseId,
          name,
          sets,
          weights,
          completed,
          skipped
        });
      });
      
      const ratingBtn = container.querySelector('.rating-scale .rating-btn.selected');
      const rating = ratingBtn ? parseInt(ratingBtn.dataset.value) : null;
      const notes = container.querySelector('.notes-input')?.value || '';
      
      return {
        date: new Date().toISOString(),
        type: workoutType,
        typeLabel: workoutType === 'upper' ? 'ä¸Šè‚¢æ—¥' : workoutType === 'lower' ? 'ä¸‹è‚¢æ—¥' : 'æ ¸å¿ƒæ—¥',
        exercises,
        rating,
        notes,
        completedCount: exercises.filter(e => e.completed).length,
        totalCount: exercises.length
      };
    }
    
    function saveWorkout(workoutType) {
      const data = collectWorkoutData(workoutType);
      
      // Get existing records
      let records = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      
      // Check if we already have a record for today + this workout type
      const today = new Date().toDateString();
      const existingIndex = records.findIndex(r => 
        new Date(r.date).toDateString() === today && r.type === workoutType
      );
      
      if (existingIndex >= 0) {
        records[existingIndex] = data;
      } else {
        records.push(data);
      }
      
      // Keep last 100 records
      if (records.length > 100) {
        records = records.slice(-100);
      }
      
      localStorage.setItem(STORAGE_KEY, JSON.stringify(records));
      
      // æ¸…é™¤è‰ç¨¿
      clearDraft();
      
      showToast('âœ… è®­ç»ƒè®°å½•å·²ä¿å­˜ï¼');
      
      // Clear the form
      setTimeout(() => {
        if (confirm('æ¸…ç©ºå½“å‰è¡¨å•æ•°æ®ï¼Ÿ')) {
          clearForm(workoutType);
        }
      }, 500);
    }
    
    function clearForm(workoutType) {
      const container = document.getElementById(workoutType);
      container.querySelectorAll('.set-input').forEach(input => {
        input.value = '';
        input.classList.remove('done');
      });
      container.querySelectorAll('.weight-input').forEach(input => {
        input.value = '';
      });
      container.querySelectorAll('.complete-btn').forEach(btn => {
        btn.classList.remove('done');
        btn.classList.add('pending');
        btn.innerHTML = 'â¬œ æœªå®Œæˆ';
      });
      container.querySelectorAll('.exercise').forEach(ex => {
        ex.classList.remove('completed');
      });
      container.querySelectorAll('.rating-btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      const notes = container.querySelector('.notes-input');
      if (notes) notes.value = '';
    }
    
    function loadHistory() {
      const records = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const container = document.getElementById('history-list');
      
      if (records.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="emoji">ğŸ“</div>
            <p>è¿˜æ²¡æœ‰è®­ç»ƒè®°å½•</p>
            <p style="margin-top: 8px; font-size: 13px;">å®Œæˆä¸€æ¬¡è®­ç»ƒåè®°å½•ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ</p>
          </div>
        `;
        return;
      }
      
      // Sort by date descending
      records.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      container.innerHTML = records.slice(0, 20).map(record => {
        const date = new Date(record.date);
        const dateStr = date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric', weekday: 'short' });
        const totalReps = record.exercises.reduce((sum, ex) => sum + ex.sets.reduce((s, v) => s + v, 0), 0);
        
        return `
          <div class="summary-card">
            <div class="summary-header">
              <span class="summary-date">${dateStr}</span>
              <span class="summary-type">${record.typeLabel}</span>
            </div>
            <div class="summary-stats">
              <div class="stat-item">
                <div class="stat-value">${record.completedCount}/${record.totalCount}</div>
                <div class="stat-label">å®ŒæˆåŠ¨ä½œ</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${totalReps}</div>
                <div class="stat-label">æ€»æ¬¡æ•°</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${record.rating || '-'}</div>
                <div class="stat-label">RPE</div>
              </div>
            </div>
            ${record.notes ? `<p style="margin-top: 10px; font-size: 13px; color: var(--muted);">ğŸ“ ${record.notes}</p>` : ''}
          </div>
        `;
      }).join('');
    }
    
    function checkAutoSync() {
      const lastSync = localStorage.getItem(SYNC_KEY);
      const now = new Date();
      
      // Check if it's Monday and we haven't synced today
      if (now.getDay() === 1) {
        const today = now.toDateString();
        if (lastSync !== today) {
          // It's Monday and we haven't synced today
          showToast('ğŸ“… ä»Šå¤©æ˜¯å‘¨ä¸€ï¼Œè®°å¾—åŒæ­¥æ•°æ®ï¼');
        }
      }
    }
    
    async function syncToDatabase() {
      const records = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      
      if (records.length === 0) {
        showToast('æ²¡æœ‰æ•°æ®éœ€è¦åŒæ­¥');
        return;
      }
      
      // Prepare data for health database
      const syncData = {
        timestamp: new Date().toISOString(),
        workouts: records,
        summary: {
          totalWorkouts: records.length,
          byType: {
            upper: records.filter(r => r.type === 'upper').length,
            lower: records.filter(r => r.type === 'lower').length,
            core: records.filter(r => r.type === 'core').length
          },
          avgRating: records.filter(r => r.rating).reduce((sum, r) => sum + r.rating, 0) / 
                     records.filter(r => r.rating).length || 0
        }
      };
      
      // Save to health database location
      const healthDbPath = '/Users/maodong/Documents/Personal/health/fitness-data.json';
      
      try {
        // Create a downloadable file (for manual sync)
        const blob = new Blob([JSON.stringify(syncData, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `fitness-sync-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
        
        // Mark as synced
        localStorage.setItem(SYNC_KEY, new Date().toDateString());
        
        showToast('âœ… æ•°æ®å·²å¯¼å‡ºï¼è¯·ä¿å­˜åˆ°å¥åº·æ•°æ®åº“');
      } catch (err) {
        showToast('âŒ åŒæ­¥å¤±è´¥: ' + err.message);
      }
    }
    
    function exportData() {
      const records = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const blob = new Blob([JSON.stringify(records, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `fitness-export-${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      URL.revokeObjectURL(url);
      showToast('ğŸ“¤ æ•°æ®å·²å¯¼å‡ºï¼');
    }

    function copyDataToClipboard() {
      const records = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      if (records.length === 0) {
        showToast('æ²¡æœ‰æ•°æ®å¯å¤åˆ¶');
        return;
      }

      // Format data for easy pasting
      const formattedData = records.slice(-10).map(r => {
        const date = new Date(r.date).toLocaleDateString('zh-CN');
        const completed = r.exercises.filter(e => e.completed).length;
        const total = r.exercises.length;
        return `${date} | ${r.typeLabel} | ${completed}/${total}å®Œæˆ | RPE: ${r.rating || '-'}`;
      }).join('\n');

      const fullData = `--- Dong å¥èº«æ‰“å¡è®°å½• ---\n${formattedData}\n\n--- JSONæ•°æ® ---\n${JSON.stringify(records.slice(-10), null, 2)}`;

      navigator.clipboard.writeText(fullData).then(() => {
        showToast('ğŸ“‹ æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
      }).catch(() => {
        // Fallback for older browsers
        const textarea = document.createElement('textarea');
        textarea.value = fullData;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        showToast('ğŸ“‹ æ•°æ®å·²å¤åˆ¶ï¼');
      });
    }

    function downloadCSV() {
      const records = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      if (records.length === 0) {
        showToast('æ²¡æœ‰æ•°æ®å¯å¯¼å‡º');
        return;
      }

      // CSV header
      let csv = '\uFEFFæ—¥æœŸ,è®­ç»ƒç±»å‹,å®ŒæˆåŠ¨ä½œæ•°,æ€»åŠ¨ä½œæ•°,å®Œæˆç‡,RPEè¯„åˆ†,å¤‡æ³¨\n';

      // CSV rows
      records.forEach(r => {
        const date = new Date(r.date).toLocaleDateString('zh-CN');
        const completedCount = r.exercises.filter(e => e.completed).length;
        const totalCount = r.exercises.length;
        const completionRate = Math.round((completedCount / totalCount) * 100) + '%';
        const rating = r.rating || '';
        const notes = (r.notes || '').replace(/,/g, 'ï¼Œ').replace(/\n/g, ' ');
        csv += `${date},${r.typeLabel},${completedCount},${totalCount},${completionRate},${rating},${notes}\n`;
      });

      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `dong-fitness-${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      URL.revokeObjectURL(url);
      showToast('ğŸ“Š CSVå·²ä¸‹è½½ï¼');
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }
  </script>
</body>
</html>
